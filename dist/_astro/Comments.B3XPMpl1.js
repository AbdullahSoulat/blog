import{r as u}from"./index.BVOCwoKb.js";var m={exports:{}},i={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p;function v(){if(p)return i;p=1;var s=Symbol.for("react.transitional.element"),x=Symbol.for("react.fragment");function o(d,r,n){var a=null;if(n!==void 0&&(a=""+n),r.key!==void 0&&(a=""+r.key),"key"in r){n={};for(var l in r)l!=="key"&&(n[l]=r[l])}else n=r;return r=n.ref,{$$typeof:s,type:d,key:a,ref:r!==void 0?r:null,props:n}}return i.Fragment=x,i.jsx=o,i.jsxs=o,i}var h;function R(){return h||(h=1,m.exports=v()),m.exports}var t=R();function E({post_id:s}){const[x,o]=u.useState([]),[d,r]=u.useState(""),[n,a]=u.useState(""),[l,f]=u.useState(!0);u.useEffect(()=>{fetch(`/api/comments?post_id=${s}`).then(e=>e.json()).then(e=>{o(e),f(!1)})},[s]);const j=async e=>{e.preventDefault(),await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post_id:s,author_name:d,content:n})}),r(""),a(""),fetch(`/api/comments?post_id=${s}`).then(c=>c.json()).then(c=>o(c))};return t.jsxs("div",{class:"px-4 flex flex-col gap-4",children:[t.jsx("h3",{class:"text-lg",children:"Add a New Comment"}),t.jsxs("form",{onSubmit:j,class:"flex flex-col gap-4",children:[t.jsx("input",{type:"text",placeholder:"Your name",value:d,onChange:e=>r(e.target.value),class:"w-full px-4 py-2 border-2",required:!0}),t.jsx("textarea",{placeholder:"Add a comment",value:n,class:"w-full px-4 py-2 border-2 h-30",onChange:e=>a(e.target.value),required:!0}),t.jsx("p",{children:t.jsx("button",{type:"submit",class:`bg-neutral-950 text-white px-5 py-3 mb-5 hover:cursor-pointer
                     hover:bg-blue-300 hover:text-neutral-950 dark:bg-neutral-200 dark:text-neutral-950`,children:"Add Comment"})})]}),t.jsx("h3",{class:"pt-6 border-t-2 border-neutral-500 text-lg dark:border-neutral-400",children:"Existing Comments"}),l?t.jsx("p",{children:"Loading..."}):t.jsx("ul",{children:x.map(e=>t.jsxs("li",{className:"border-2 p-4 mb-2",children:[t.jsx("p",{className:"text-neutral-500",children:e.author_name}),t.jsx("p",{children:e.content})]},e.id))})]})}export{E as default};
